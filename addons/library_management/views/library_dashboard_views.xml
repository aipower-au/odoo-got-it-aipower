<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Dashboard Form View -->
        <record id="view_library_dashboard_form" model="ir.ui.view">
            <field name="name">library.dashboard.form</field>
            <field name="model">library.dashboard</field>
            <field name="arch" type="xml">
                <form string="Library Dashboard" create="false" edit="false" delete="false">
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>

                        <!-- Statistics Section -->
                        <group string="Library Statistics">
                            <group string="Books">
                                <button name="action_view_all_books"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-book">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value">
                                            <field name="total_books" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Total Books</span>
                                    </div>
                                </button>
                                <button name="action_view_available_books"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-check-circle">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value text-success">
                                            <field name="available_books" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Available</span>
                                    </div>
                                </button>
                                <button name="action_view_borrowed_books"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-hand-paper-o">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value text-warning">
                                            <field name="borrowed_books" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Borrowed</span>
                                    </div>
                                </button>
                            </group>
                            <group string="Members">
                                <button name="action_view_all_members"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-users">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value">
                                            <field name="total_members" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Total Members</span>
                                    </div>
                                </button>
                                <button name="action_view_active_members"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-user-circle">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value text-success">
                                            <field name="active_members" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Active Members</span>
                                    </div>
                                </button>
                            </group>
                        </group>

                        <group string="Borrowing Statistics">
                            <group>
                                <label for="total_borrowings" string="Total Borrowings"/>
                                <div>
                                    <field name="total_borrowings" class="oe_inline" widget="integer"/>
                                </div>
                                <button name="action_view_active_borrowings"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-clock-o">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value text-info">
                                            <field name="active_borrowings" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Active Borrowings</span>
                                    </div>
                                </button>
                            </group>
                            <group>
                                <button name="action_view_overdue_borrowings"
                                        type="object"
                                        class="oe_stat_button"
                                        icon="fa-exclamation-triangle">
                                    <div class="o_field_widget o_stat_info">
                                        <span class="o_stat_value text-danger">
                                            <field name="overdue_borrowings" widget="integer"/>
                                        </span>
                                        <span class="o_stat_text">Overdue</span>
                                    </div>
                                </button>
                                <label for="total_fines" string="Total Fines"/>
                                <div>
                                    <field name="total_fines" class="oe_inline" widget="monetary"/>
                                </div>
                            </group>
                        </group>

                        <!-- Quick Actions Section -->
                        <group string="Quick Actions">
                            <group>
                                <button name="action_new_borrowing"
                                        string="New Borrowing"
                                        type="object"
                                        class="btn-primary"
                                        icon="fa-plus"/>
                                <button name="action_new_book"
                                        string="Add New Book"
                                        type="object"
                                        class="btn-primary"
                                        icon="fa-plus"/>
                                <button name="action_new_member"
                                        string="Register New Member"
                                        type="object"
                                        class="btn-primary"
                                        icon="fa-plus"/>
                            </group>
                        </group>

                        <!-- Recent Activities Section -->
                        <notebook>
                            <page string="Recent Borrowings">
                                <field name="recent_borrowings_ids" nolabel="1">
                                    <list>
                                        <field name="name"/>
                                        <field name="book_id"/>
                                        <field name="member_id"/>
                                        <field name="borrow_date"/>
                                        <field name="due_date"/>
                                        <field name="state" widget="badge"
                                               decoration-warning="state == 'borrowed'"
                                               decoration-danger="is_overdue"/>
                                        <field name="is_overdue" invisible="1"/>
                                    </list>
                                </field>
                            </page>
                            <page string="Recent Returns">
                                <field name="recent_returns_ids" nolabel="1">
                                    <list>
                                        <field name="name"/>
                                        <field name="book_id"/>
                                        <field name="member_id"/>
                                        <field name="borrow_date"/>
                                        <field name="return_date"/>
                                        <field name="fine_amount"/>
                                        <field name="state" widget="badge"
                                               decoration-success="state == 'returned'"/>
                                    </list>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Dashboard Action -->
        <record id="action_library_dashboard" model="ir.actions.act_window">
            <field name="name">Dashboard</field>
            <field name="res_model">library.dashboard</field>
            <field name="view_mode">form</field>
            <field name="target">current</field>
            <field name="domain">[('id', '>', 0)]</field>
            <field name="context">{'form_view_initial_mode': 'edit', 'default_name': 'Library Dashboard'}</field>
        </record>

        <!-- Dashboard Menu Item (as first item under Library root) -->
        <menuitem id="menu_library_dashboard"
                  name="Dashboard"
                  parent="menu_library_root"
                  action="action_library_dashboard"
                  sequence="1"/>

    </data>
</odoo>
